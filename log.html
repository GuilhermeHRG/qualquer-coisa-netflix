
        <html>
        <head>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <style>
                body { font-family: Arial, sans-serif; background: #36393f; color: white; padding: 20px; }
                .container { background: #2f3136; padding: 15px; border-radius: 8px; }
                .log { background: #202225; padding: 10px; border-radius: 5px; max-height: 300px; overflow-y: auto; }
                .log-entry { font-size: 12px; padding: 5px 0; border-bottom: 1px solid #40444b; }
                .stats { margin-top: 20px; }
                canvas { background: white; border-radius: 8px; }
            </style>
        </head>
        <body>
            <div class="container">
                <h2>Monitor de Trabalho</h2>
                <p><strong>Arquivo atual:</strong> page.tsx</p>
                <p><strong>Tempo de edição atual:</strong> 00:00:09</p>
                <div class="stats">
                    <p><strong>Tempo total de edição:</strong> 00:02:23</p>
                    <p><strong>Tempo médio por arquivo:</strong> 00:00:35</p>
                    <p><strong>Tempo total de inatividade:</strong> 00:05:22</p>
                </div>
                <canvas id="chart"></canvas>
                <p style="margin-top: 10px; font-size: 12px; color: #aaa;">
                    Atualizado em: <span id="dataAtualizada"></span>
                </p>
            </div>

            <div class="log">
                <strong>Atividades Recentes:</strong>
                <div class="log-entry">01/06/2025, 00:27:21 - inatividade detectada: <strong></strong> (---)</div><div class="log-entry">01/06/2025, 00:27:45 - retorno da inatividade: <strong></strong> (00:00:23)</div><div class="log-entry">01/06/2025, 00:27:54 - inatividade detectada: <strong>.env.local</strong> (---)</div><div class="log-entry">01/06/2025, 00:27:55 - retorno da inatividade: <strong>.env.local</strong> (00:00:01)</div><div class="log-entry">01/06/2025, 00:27:58 - inatividade detectada: <strong>.env.local</strong> (---)</div><div class="log-entry">01/06/2025, 00:28:01 - retorno da inatividade: <strong>.env.local</strong> (00:00:02)</div><div class="log-entry">01/06/2025, 00:28:04 - inatividade detectada: <strong>.env.local</strong> (---)</div><div class="log-entry">01/06/2025, 00:28:15 - retorno da inatividade: <strong>.env.local</strong> (00:00:11)</div><div class="log-entry">01/06/2025, 00:28:42 - inatividade detectada: <strong>.env.local</strong> (---)</div><div class="log-entry">01/06/2025, 00:28:43 - retorno da inatividade: <strong>.env.local</strong> (00:00:01)</div><div class="log-entry">01/06/2025, 00:28:56 - troca de arquivo: <strong>.env.local</strong> (00:01:04)</div><div class="log-entry">01/06/2025, 00:28:58 - inatividade detectada: <strong>random.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:28:58 - retorno da inatividade: <strong>random.ts</strong> (00:00:00)</div><div class="log-entry">01/06/2025, 00:29:08 - inatividade detectada: <strong>random.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:29:10 - retorno da inatividade: <strong>random.ts</strong> (00:00:02)</div><div class="log-entry">01/06/2025, 00:29:10 - troca de arquivo: <strong>random.ts</strong> (00:00:13)</div><div class="log-entry">01/06/2025, 00:29:38 - inatividade detectada: <strong>page.tsx</strong> (---)</div><div class="log-entry">01/06/2025, 00:30:14 - fechamento: <strong>page.tsx</strong> (00:01:03)</div><div class="log-entry">01/06/2025, 00:30:16 - retorno da inatividade: <strong>page.tsx</strong> (00:00:38)</div><div class="log-entry">01/06/2025, 00:30:27 - inatividade detectada: <strong>page.tsx</strong> (---)</div><div class="log-entry">01/06/2025, 00:33:17 - retorno da inatividade: <strong>page.tsx</strong> (00:02:49)</div><div class="log-entry">01/06/2025, 00:33:23 - fechamento: <strong>route.ts</strong> (00:00:00)</div><div class="log-entry">01/06/2025, 00:33:26 - inatividade detectada: <strong>route.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:33:27 - retorno da inatividade: <strong>route.ts</strong> (00:00:00)</div><div class="log-entry">01/06/2025, 00:33:40 - inatividade detectada: <strong>route.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:34:36 - retorno da inatividade: <strong>route.ts</strong> (00:00:56)</div><div class="log-entry">01/06/2025, 00:34:49 - inatividade detectada: <strong>route.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:34:50 - retorno da inatividade: <strong>route.ts</strong> (00:00:01)</div><div class="log-entry">01/06/2025, 00:34:50 - inatividade detectada: <strong>route.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:34:51 - retorno da inatividade: <strong>route.ts</strong> (00:00:01)</div><div class="log-entry">01/06/2025, 00:34:52 - inatividade detectada: <strong>route.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:34:53 - retorno da inatividade: <strong>route.ts</strong> (00:00:01)</div><div class="log-entry">01/06/2025, 00:34:54 - inatividade detectada: <strong>route.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:35:00 - retorno da inatividade: <strong>route.ts</strong> (00:00:05)</div><div class="log-entry">01/06/2025, 00:35:03 - troca de arquivo: <strong>page.tsx</strong> (00:00:01)</div><div class="log-entry">01/06/2025, 00:35:03 - fechamento: <strong>route.ts</strong> (00:00:00)</div><div class="log-entry">01/06/2025, 00:35:04 - inatividade detectada: <strong>route.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:35:05 - retorno da inatividade: <strong>route.ts</strong> (00:00:01)</div><div class="log-entry">01/06/2025, 00:35:05 - inatividade detectada: <strong>route.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:35:06 - retorno da inatividade: <strong>route.ts</strong> (00:00:00)</div><div class="log-entry">01/06/2025, 00:35:07 - inatividade detectada: <strong>route.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:35:09 - retorno da inatividade: <strong>route.ts</strong> (00:00:01)</div><div class="log-entry">01/06/2025, 00:35:09 - inatividade detectada: <strong>route.ts</strong> (---)</div><div class="log-entry">01/06/2025, 00:35:10 - retorno da inatividade: <strong>route.ts</strong> (00:00:01)</div>

            </div>

            <script>
                function formatChartTime(ms) {
                    const sec = Math.floor(ms / 1000) % 60;
                    const min = Math.floor(ms / (1000 * 60)) % 60;
                    const hours = Math.floor(ms / (1000 * 60 * 60));
                    return `${String(hours).padStart(2, '0')}:${String(min).padStart(2, '0')}:${String(sec).padStart(2, '0')}`;
                }

                window.addEventListener('message', event => {
                    const data = event.data;
                    const ctx = document.getElementById('chart').getContext('2d');
                    const labels = Object.keys(data.fileDurations).map(file => file.split(/[\\/]/).pop());
                    const values = Object.values(data.fileDurations);

                    new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'Tempo de Edição',
                                data: values,
                                backgroundColor: 'rgba(75, 192, 192, 0.6)',
                                borderColor: 'rgba(75, 192, 192, 1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                tooltip: {
                                    callbacks: {
                                        label: context => formatChartTime(context.raw)
                                    }
                                }
                            }
                        }
                    });

                    // Atualiza a data no formato pt-BR
                    const dataAtual = new Date();
                    const formatado = dataAtual.toLocaleString('pt-BR', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit'
                    });
                    document.getElementById('dataAtualizada').innerText = formatado;
                });
            </script>
        </body>
        </html>
    